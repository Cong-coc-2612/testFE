{"ast":null,"code":"var _jsxFileName = \"E:\\\\DoAn_2020\\\\SportTournamentSupportSystem\\\\frontEnd\\\\SportTournamentSupportSystem\\\\src\\\\components\\\\AllTournaments\\\\index.tsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Skeleton from 'react-loading-skeleton';\nimport 'pagination.css';\nimport TournamentOverview from 'components/TournamentOverview';\nimport Paging from 'components/Paging';\nimport SheetData from 'components/SheetData';\nimport { searchTournaments } from 'components/Header/actions';\nimport { queryListTournament } from './actions';\nimport './styles.css';\nimport { formatTournamentStatus } from 'utils/common';\n\nclass AllTournaments extends React.Component {\n  constructor(props) {\n    super(props);\n    this.configSheetData = void 0;\n\n    this.stopTournament = id => {\n      const params = {\n        path: '',\n        param: {\n          id\n        },\n        data: {}\n      }; // this.props.stopTournament(params);\n    };\n\n    this.continueTournament = id => {\n      const params = {\n        path: '',\n        param: {\n          id\n        },\n        data: {}\n      }; // this.props.continueTournament(params);\n    };\n\n    this.requestData = (page = 1) => {\n      const params = {\n        path: '',\n        param: {\n          page,\n          limit: this.props.type === 'user' ? 3 : 10\n        },\n        data: {}\n      };\n      this.props.queryListTournament(params);\n    };\n\n    this.onChangeSelectedPage = pageNumber => {\n      if (this.props.globalSearchString !== '') {\n        const params = {\n          path: '',\n          param: {\n            page: pageNumber,\n            limit: this.props.type === 'user' ? 3 : 10,\n            searchString: this.props.globalSearchString\n          },\n          data: {}\n        };\n        this.props.searchTournaments(params);\n      } else {\n        this.requestData(pageNumber);\n      }\n\n      this.setState({\n        activePage: pageNumber\n      });\n    };\n\n    this.state = {\n      activePage: 1\n    };\n    this.configSheetData = {\n      fixedColumnCount: 4,\n      fixedRowCount: 1,\n      rowHeight: 50,\n      fetchCount: 3,\n      header: [{\n        label: 'Cài đặt',\n        width: 120,\n        style: {\n          justifyContent: 'center'\n        },\n        element: (rowData, rowIndex, style) => /*#__PURE__*/React.createElement(\"div\", {\n          style: style,\n          className: 'AllUsers-button-text-hover',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 13\n          }\n        }, rowData.Tournament.status !== 'finished' ? /*#__PURE__*/React.createElement(\"p\", {\n          className: 'AllUsers-button-text',\n          onClick: () => this.stopTournament(Number(rowData.Tournament.id)),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 130\n          }\n        }, \"D\\u1EEBng gi\\u1EA3i\") : rowData.Tournament.status !== 'stopped' && /*#__PURE__*/React.createElement(\"p\", {\n          className: 'AllUsers-button-text',\n          onClick: () => this.continueTournament(Number(rowData.Tournament.id)),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 321\n          }\n        }, \"Ti\\u1EBFp t\\u1EE5c gi\\u1EA3i\"))\n      }, {\n        label: 'Id',\n        width: 50,\n        style: {\n          justifyContent: 'center'\n        },\n        element: (rowData, rowIndex, style) => /*#__PURE__*/React.createElement(\"div\", {\n          style: style,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }\n        }, rowData.Tournament.id)\n      }, {\n        label: 'Tên đầy đủ',\n        width: 150,\n        style: {\n          justifyContent: 'center'\n        },\n        element: (rowData, rowIndex, style) => /*#__PURE__*/React.createElement(\"div\", {\n          style: style,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }\n        }, rowData.Tournament.fullName)\n      }, {\n        label: 'Tên ngắn',\n        width: 100,\n        style: {\n          justifyContent: 'center'\n        },\n        element: (rowData, rowIndex, style) => /*#__PURE__*/React.createElement(\"div\", {\n          style: style,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }\n        }, rowData.Tournament.shortName)\n      }, {\n        label: 'Trạng thái',\n        width: 150,\n        style: {\n          justifyContent: 'center'\n        },\n        element: (rowData, rowIndex, style) => /*#__PURE__*/React.createElement(\"div\", {\n          style: style,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }\n        }, formatTournamentStatus(rowData.Tournament.status))\n      }, {\n        label: 'Số đội tham gia',\n        width: 130,\n        style: {\n          justifyContent: 'center'\n        },\n        element: (rowData, rowIndex, style) => /*#__PURE__*/React.createElement(\"div\", {\n          style: style,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }\n        }, rowData.OtherInformation.countTeam)\n      }, {\n        label: 'Tiến trình giải',\n        width: 130,\n        style: {\n          justifyContent: 'center'\n        },\n        element: (rowData, rowIndex, style) => /*#__PURE__*/React.createElement(\"div\", {\n          style: style,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }\n        }, rowData.OtherInformation.process, \"%\")\n      }, {\n        label: 'Nhà tài trợ',\n        width: 110,\n        style: {\n          justifyContent: 'center'\n        },\n        element: (rowData, rowIndex, style) => /*#__PURE__*/React.createElement(\"div\", {\n          style: style,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }\n        }, rowData.Tournament.donor)\n      }, {\n        label: 'Nơi khai mạc',\n        width: 300,\n        style: {\n          justifyContent: 'center'\n        },\n        element: (rowData, rowIndex, style) => /*#__PURE__*/React.createElement(\"div\", {\n          style: style,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }\n        }, rowData.Tournament.openingLocation)\n      }, {\n        label: 'Ngày khai mạc',\n        width: 250,\n        style: {\n          justifyContent: 'center'\n        },\n        element: (rowData, rowIndex, style) => /*#__PURE__*/React.createElement(\"div\", {\n          style: style,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }\n        }, rowData.Tournament.openingTime)\n      }, {\n        label: 'Nơi bế mạc',\n        width: 300,\n        style: {\n          justifyContent: 'center'\n        },\n        element: (rowData, rowIndex, style) => /*#__PURE__*/React.createElement(\"div\", {\n          style: style,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }\n        }, rowData.Tournament.closingLocation)\n      }, {\n        label: 'Ngày bế mạc',\n        width: 250,\n        style: {\n          justifyContent: 'center'\n        },\n        element: (rowData, rowIndex, style) => /*#__PURE__*/React.createElement(\"div\", {\n          style: style,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }\n        }, rowData.Tournament.closingTime)\n      } // {\n      //   label: 'Địa chỉ',\n      //   width: 300,\n      //   style: { justifyContent: 'center' },\n      //   element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\n      //     <div style={style}>{rowData.address}</div>\n      //   ),\n      // },\n      // {\n      //   label: 'Số điện thoại',\n      //   width: 200,\n      //   style: { justifyContent: 'center' },\n      //   element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\n      //     <div style={style}>{rowData.phoneNumber}</div>\n      //   ),\n      // },\n      ]\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.props.globalSearchString !== nextProps.globalSearchString && nextProps.globalSearchString === '') {\n      this.requestData();\n    }\n\n    return true;\n  }\n\n  componentDidMount() {\n    if (this.props.globalSearchString === '') {\n      this.requestData();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"AllTournaments-container-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"AllTournaments-header-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }\n    }, \"T\\u1EA5t c\\u1EA3 c\\xE1c gi\\u1EA3i \\u0111\\u1EA5u\"), this.props.globalSearchString !== '' && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"AllTournaments-search-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 50\n      }\n    }, \"K\\u1EBFt qu\\u1EA3 t\\xECm ki\\u1EBFm cho: \\\"\", this.props.globalSearchString, \"\\\"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: `${this.props.type === 'user' ? 'AllTournaments-container' : 'AllTournaments-container-admin'}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }\n    }, this.props.listTournament && this.props.listTournament.Tournaments ? this.props.listTournament.Tournaments.length > 0 ? this.props.type === 'user' ? this.props.listTournament.Tournaments.map((item, index) => /*#__PURE__*/React.createElement(TournamentOverview, {\n      info: item,\n      index: index,\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 30\n      }\n    })) : /*#__PURE__*/React.createElement(SheetData, {\n      config: this.configSheetData,\n      data: this.props.listTournament.Tournaments,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 94\n      }\n    }) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 199\n      }\n    }, \"Kh\\xF4ng t\\xECm th\\u1EA5y k\\u1EBFt qu\\u1EA3 n\\xE0o!\") : /*#__PURE__*/React.createElement(Skeleton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Paging, {\n      currentPage: this.state.activePage,\n      totalPage: this.props.listTournament != null ? this.props.listTournament.TotalPage : 0,\n      onChangeSelectedPage: this.onChangeSelectedPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    listTournament: state.listTournament,\n    globalSearchString: state.globalSearchString\n  };\n};\n\nexport default connect(mapStateToProps, {\n  queryListTournament,\n  searchTournaments\n})(AllTournaments);","map":{"version":3,"sources":["E:/DoAn_2020/SportTournamentSupportSystem/frontEnd/SportTournamentSupportSystem/src/components/AllTournaments/index.tsx"],"names":["React","connect","Skeleton","TournamentOverview","Paging","SheetData","searchTournaments","queryListTournament","formatTournamentStatus","AllTournaments","Component","constructor","props","configSheetData","stopTournament","id","params","path","param","data","continueTournament","requestData","page","limit","type","onChangeSelectedPage","pageNumber","globalSearchString","searchString","setState","activePage","state","fixedColumnCount","fixedRowCount","rowHeight","fetchCount","header","label","width","style","justifyContent","element","rowData","rowIndex","Tournament","status","Number","fullName","shortName","OtherInformation","countTeam","process","donor","openingLocation","openingTime","closingLocation","closingTime","shouldComponentUpdate","nextProps","nextState","componentDidMount","render","listTournament","Tournaments","length","map","item","index","TotalPage","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Skeleton from 'react-loading-skeleton';\r\nimport 'pagination.css';\r\nimport TournamentOverview from 'components/TournamentOverview';\r\nimport Paging from 'components/Paging';\r\nimport SheetData, { ISheetDataConfig } from 'components/SheetData';\r\nimport { IBigRequest, IParams } from 'interfaces/common';\r\nimport { IState } from 'redux-saga/reducers';\r\nimport { searchTournaments } from 'components/Header/actions';\r\nimport { queryListTournament } from './actions';\r\nimport './styles.css';\r\nimport { formatTournamentStatus } from 'utils/common';\r\n\r\ninterface IAllTournamentsProps extends React.ClassAttributes<AllTournaments> {\r\n  listTournament: IParams | null;\r\n  globalSearchString: string;\r\n  type: 'user' | 'admin';\r\n\r\n  queryListTournament(param: IBigRequest): void;\r\n  searchTournaments(param: IBigRequest): void;\r\n}\r\n\r\ninterface IAllTournamentsState {\r\n  activePage: number;\r\n}\r\n\r\nclass AllTournaments extends React.Component<IAllTournamentsProps, IAllTournamentsState> {\r\n  private configSheetData: ISheetDataConfig;\r\n\r\n  constructor(props: IAllTournamentsProps) {\r\n    super(props);\r\n    this.state = {\r\n      activePage: 1,\r\n    };\r\n    this.configSheetData = {\r\n      fixedColumnCount: 4,\r\n      fixedRowCount: 1,\r\n      rowHeight: 50,\r\n      fetchCount: 3,\r\n      header: [\r\n        {\r\n          label: 'Cài đặt',\r\n          width: 120,\r\n          style: { justifyContent: 'center' },\r\n          element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\r\n            <div style={style} className={'AllUsers-button-text-hover'}>{(rowData.Tournament as IParams).status !== 'finished' ? <p className={'AllUsers-button-text'} onClick={() => this.stopTournament(Number((rowData.Tournament as IParams).id))}>Dừng giải</p> : ((rowData.Tournament as IParams).status !== 'stopped' && <p className={'AllUsers-button-text'} onClick={() => this.continueTournament(Number((rowData.Tournament as IParams).id))}>Tiếp tục giải</p>)}</div>\r\n          ),\r\n        },\r\n        {\r\n          label: 'Id',\r\n          width: 50,\r\n          style: { justifyContent: 'center' },\r\n          element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\r\n            <div style={style}>{(rowData.Tournament as IParams).id}</div>\r\n          ),\r\n        },\r\n        {\r\n          label: 'Tên đầy đủ',\r\n          width: 150,\r\n          style: { justifyContent: 'center' },\r\n          element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\r\n            <div style={style}>{(rowData.Tournament as IParams).fullName}</div>\r\n          ),\r\n        },\r\n        {\r\n          label: 'Tên ngắn',\r\n          width: 100,\r\n          style: { justifyContent: 'center' },\r\n          element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\r\n            <div style={style}>{(rowData.Tournament as IParams).shortName}</div>\r\n          ),\r\n        },\r\n        {\r\n          label: 'Trạng thái',\r\n          width: 150,\r\n          style: { justifyContent: 'center' },\r\n          element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\r\n            <div style={style}>{formatTournamentStatus((rowData.Tournament as IParams).status as string)}</div>\r\n          ),\r\n        },\r\n        {\r\n          label: 'Số đội tham gia',\r\n          width: 130,\r\n          style: { justifyContent: 'center' },\r\n          element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\r\n            <div style={style}>{(rowData.OtherInformation as IParams).countTeam}</div>\r\n          ),\r\n        },\r\n        {\r\n          label: 'Tiến trình giải',\r\n          width: 130,\r\n          style: { justifyContent: 'center' },\r\n          element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\r\n            <div style={style}>{(rowData.OtherInformation as IParams).process}%</div>\r\n          ),\r\n        },\r\n        {\r\n          label: 'Nhà tài trợ',\r\n          width: 110,\r\n          style: { justifyContent: 'center' },\r\n          element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\r\n            <div style={style}>{(rowData.Tournament as IParams).donor}</div>\r\n          ),\r\n        },\r\n        {\r\n          label: 'Nơi khai mạc',\r\n          width: 300,\r\n          style: { justifyContent: 'center' },\r\n          element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\r\n            <div style={style}>{(rowData.Tournament as IParams).openingLocation}</div>\r\n          ),\r\n        },\r\n        {\r\n          label: 'Ngày khai mạc',\r\n          width: 250,\r\n          style: { justifyContent: 'center' },\r\n          element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\r\n            <div style={style}>{(rowData.Tournament as IParams).openingTime}</div>\r\n          ),\r\n        },\r\n        {\r\n          label: 'Nơi bế mạc',\r\n          width: 300,\r\n          style: { justifyContent: 'center' },\r\n          element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\r\n            <div style={style}>{(rowData.Tournament as IParams).closingLocation}</div>\r\n          ),\r\n        },\r\n        {\r\n          label: 'Ngày bế mạc',\r\n          width: 250,\r\n          style: { justifyContent: 'center' },\r\n          element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\r\n            <div style={style}>{(rowData.Tournament as IParams).closingTime}</div>\r\n          ),\r\n        },\r\n        // {\r\n        //   label: 'Địa chỉ',\r\n        //   width: 300,\r\n        //   style: { justifyContent: 'center' },\r\n        //   element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\r\n        //     <div style={style}>{rowData.address}</div>\r\n        //   ),\r\n        // },\r\n        // {\r\n        //   label: 'Số điện thoại',\r\n        //   width: 200,\r\n        //   style: { justifyContent: 'center' },\r\n        //   element: (rowData: IParams, rowIndex: number, style?: React.CSSProperties) => (\r\n        //     <div style={style}>{rowData.phoneNumber}</div>\r\n        //   ),\r\n        // },\r\n      ],\r\n    };\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps: IAllTournamentsProps, nextState: IAllTournamentsState) {\r\n    if (this.props.globalSearchString !== nextProps.globalSearchString && nextProps.globalSearchString === '') {\r\n      this.requestData();\r\n    }\r\n    return true;\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.globalSearchString === '') {\r\n      this.requestData();\r\n    }\r\n  }\r\n\r\n  private stopTournament = (id: number) => {\r\n    const params = {\r\n      path: '',\r\n      param: {\r\n        id,\r\n      },\r\n      data: {},\r\n    }\r\n    // this.props.stopTournament(params);\r\n  }\r\n\r\n  private continueTournament = (id: number) => {\r\n    const params = {\r\n      path: '',\r\n      param: {\r\n        id,\r\n      },\r\n      data: {},\r\n    }\r\n    // this.props.continueTournament(params);\r\n  }\r\n\r\n  private requestData = (page = 1) => {\r\n    const params = {\r\n      path: '',\r\n      param: {\r\n        page,\r\n        limit: this.props.type === 'user' ? 3 : 10,\r\n      },\r\n      data: {},\r\n    }\r\n    this.props.queryListTournament(params);\r\n  }\r\n\r\n  private onChangeSelectedPage = (pageNumber: number) => {\r\n    if (this.props.globalSearchString !== '') {\r\n      const params = {\r\n        path: '',\r\n        param: {\r\n          page: pageNumber,\r\n          limit: this.props.type === 'user' ? 3 : 10,\r\n          searchString: this.props.globalSearchString,\r\n        },\r\n        data: {},\r\n      };\r\n      this.props.searchTournaments(params);\r\n    } else {\r\n      this.requestData(pageNumber);\r\n    }\r\n    this.setState({ activePage: pageNumber });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"AllTournaments-container-container\">\r\n        <p className=\"AllTournaments-header-text\">Tất cả các giải đấu</p>\r\n        {this.props.globalSearchString !== '' && <p className=\"AllTournaments-search-text\">Kết quả tìm kiếm cho: \"{this.props.globalSearchString}\"</p>}\r\n        <div className={`${this.props.type === 'user' ? 'AllTournaments-container' : 'AllTournaments-container-admin'}`}>\r\n          {this.props.listTournament && this.props.listTournament.Tournaments ? ((this.props.listTournament.Tournaments as unknown as IParams[]).length > 0 ? (this.props.type === 'user' ? (this.props.listTournament.Tournaments as IParams[]).map(\r\n            (item, index) => <TournamentOverview info={item} index={index} key={index} />) : <SheetData config={this.configSheetData} data={this.props.listTournament.Tournaments as IParams[]} />) : <p>Không tìm thấy kết quả nào!</p>) :\r\n            <Skeleton />\r\n          }\r\n        </div>\r\n        <Paging currentPage={this.state.activePage} totalPage={this.props.listTournament != null ? this.props.listTournament.TotalPage as number : 0} onChangeSelectedPage={this.onChangeSelectedPage} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: IState) => {\r\n  return {\r\n    listTournament: state.listTournament,\r\n    globalSearchString: state.globalSearchString,\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { queryListTournament, searchTournaments }\r\n)(AllTournaments);"]},"metadata":{},"sourceType":"module"}